/* MyDayHub Beta 5 - Tasks View Specific Styles */

/* ==========================================================================
   1. TASK BOARD LAYOUT
   ========================================================================== */

#task-board-container {
	display: flex;
	gap: 1rem;
	align-items: flex-start; /* Align columns to the top */
	overflow-x: auto; /* Allow horizontal scrolling */
	height: 100%;
}

/* ==========================================================================
   2. COLUMN STYLES
   ========================================================================== */

.task-column {
	background-color: var(--toolbar-bg);
	border: 1px solid var(--border-color);
	border-radius: 8px;
	width: 320px;
	flex-shrink: 0; /* Prevent columns from shrinking */
	display: flex;
	flex-direction: column;
	max-height: 100%;
}

.column-header {
	display: flex;
	align-items: center;
	padding: 0.75rem 1rem;
	border-bottom: 1px solid var(--border-color);
	gap: 0.75rem; /* Add gap for spacing between elements */
}

.column-title {
	font-size: 1.1rem;
	font-weight: 500;
	margin: 0;
	flex-grow: 1; /* Allows title to push count to the right */
}

.column-header-controls {
	display: flex;
	align-items: center;
	gap: 4px;
	opacity: 0; /* Hidden by default */
	pointer-events: none;
	transition: opacity 0.2s ease-in-out;
}

.column-header:hover .column-header-controls {
	opacity: 1;
	pointer-events: auto;
}

.btn-move-column {
	background: transparent;
	border: none;
	color: var(--text-secondary);
	cursor: pointer;
	font-weight: bold;
	font-size: 1.2rem;
	padding: 0 4px;
	line-height: 1;
	transition: color 0.2s ease-in-out;
}

.btn-move-column:hover {
	color: var(--accent-color);
}

.btn-delete-column {
	background: transparent;
	border: none;
	padding: 2px;
	cursor: pointer;
	line-height: 0;
}

.btn-delete-column svg {
	stroke: var(--text-secondary);
	transition: stroke 0.2s ease-in-out;
}

.btn-delete-column:hover svg {
	stroke: #e57373; /* A soft red for hover */
}


.task-count {
	font-size: 0.9rem;
	color: var(--text-secondary);
	background-color: var(--bg-color);
	padding: 2px 8px;
	border-radius: 10px;
}

.column-body {
	padding: 0.5rem;
	overflow-y: auto;
	flex-grow: 1;
}

.column-footer {
	padding: 0.5rem;
	border-top: 1px solid var(--border-color);
}

.column-footer input {
	width: 100%;
	background-color: transparent;
	border: none;
	color: var(--text-secondary);
	padding: 0.5rem;
	border-radius: 4px;
	box-sizing: border-box;
}

.column-footer input:focus {
	outline: none;
	background-color: var(--bg-color);
}

.no-tasks-message {
	padding: 1rem;
	color: var(--text-secondary);
	font-size: 0.9rem;
}


/* ==========================================================================
   3. TASK CARD STYLES
   ========================================================================== */

.task-card {
	display: flex;
	flex-direction: column;
	background-color: var(--bg-color);
	border: 1px solid var(--border-color);
	padding: 0.75rem;
	border-radius: 6px;
	margin-bottom: 0.5rem;
}

.task-card-main {
	display: flex;
	align-items: center;
	gap: 0.75rem;
}


.task-status-band {
	width: 12px;
	height: 24px;
	background-color: var(--accent-color);
	border-radius: 4px;
	cursor: pointer;
	transition: background-color 0.2s ease-in-out, background 0.2s ease-in-out;
	flex-shrink: 0;
}

.task-checkbox {
	align-self: center;
}

.task-title {
	flex-grow: 1;
	align-self: center;
	/* Modified for Layout Bug Fix */
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	/* End of modification */
}


/* --- Task Card Footer & Indicators --- */

.task-card-footer {
	display: flex;
	align-items: center;
	gap: 1rem;
	padding-top: 0.4rem;
	margin-top: 0.4rem;
	border-top: 1px solid var(--border-color-light);
	padding-left: calc(12px + 0.75rem + 13px + 0.75rem); /* band + gap + checkbox + gap */
}

.task-indicator {
	display: flex;
	align-items: center;
	gap: 0.25rem;
	font-size: 0.75rem;
	color: var(--text-secondary);
	font-weight: 500;
}

.indicator-shortcut {
	cursor: pointer;
	transition: color 0.2s ease-in-out;
}

.indicator-shortcut:hover {
	color: var(--text-primary);
}


.task-indicator svg {
	stroke: currentColor;
}

.task-indicator.overdue {
	color: #ff6b6b; /* A clear, but not too harsh, red */
}


.task-card.classification-signal .task-status-band {
	background-color: #28a745; /* Green */
}

.task-card.classification-support .task-status-band {
	background: repeating-linear-gradient(
		45deg,
		#007bff,
		#007bff 3px,
		rgba(0, 0, 0, 0.2) 3px,
		rgba(0, 0, 0, 0.2) 4px
	);
}

.task-card.classification-noise .task-status-band {
	background-color: #fd7e14; /* Orange */
}

.task-card.completed {
	opacity: 0.6;
}

.task-card.completed .task-title {
	text-decoration: line-through;
	color: var(--text-secondary);
}

.task-card.completed .task-status-band {
	background-color: var(--text-secondary); /* Gray */
}

.task-card.dragging {
	opacity: 0.5;
	transform: rotate(2deg);
}

/* ==========================================================================
   4. HEADER CONTROLS
   ========================================================================== */

#form-add-column {
	display: inline-block;
}

#input-new-column-name {
	padding: 0.5rem 1rem;
	border: 1px solid var(--accent-color);
	background-color: var(--bg-color);
	color: var(--text-primary);
	border-radius: 6px;
	font-size: 1rem;
}

#input-new-column-name:focus {
	outline: none;
}

.btn-header {
	background: none;
	border: 1px solid transparent;
	color: var(--text-secondary);
	padding: 0.5rem 1rem;
	font-size: 1rem;
	cursor: pointer;
	border-radius: 6px;
}

.btn-header:hover {
	background-color: var(--btn-hover-bg);
	color: var(--text-primary);
}


/* ==========================================================================
   5. RESPONSIVE & MOBILE STYLES
   ========================================================================== */

@media (max-width: 768px) {
	#task-board-container {
		flex-direction: column;
		overflow-x: hidden;
		gap: 1.5rem;
	}

	.task-column {
		width: 100%;
	}
}

/* ==========================================================================
   6. TASK ACTIONS MENU
   ========================================================================== */

.btn-task-actions {
	background: transparent;
	border: none;
	color: var(--text-secondary);
	cursor: pointer;
	padding: 4px;
	border-radius: 4px;
	font-size: 1.2rem;
	line-height: 1;
	align-self: center;
	transition: background-color 0.2s ease-out, color 0.2s ease-out;
}

.btn-task-actions:hover {
	background-color: var(--btn-hover-bg);
	color: var(--text-primary);
}

.task-actions-menu {
	position: absolute;
	background-color: var(--column-bg);
	border: 1px solid var(--card-border);
	border-radius: 6px;
	box-shadow: 0 5px 15px rgba(0,0,0,0.3);
	z-index: 100;
	padding: 5px;
	min-width: 160px;
	opacity: 0;
	transform: scale(0.95) translateY(-5px);
	transition: transform 0.1s ease-out, opacity 0.1s ease-out;
	transform-origin: top right;
}

.task-actions-menu.visible {
	opacity: 1;
	transform: scale(1) translateY(0);
}

.task-action-btn {
	display: flex;
	align-items: center;
	gap: 0.75rem;
	width: 100%;
	background: none;
	border: none;
	color: var(--text-primary);
	text-align: left;
	padding: 8px 12px;
	border-radius: 4px;
	cursor: pointer;
	font-size: 0.95rem;
}

.task-action-btn:hover {
	background-color: var(--accent-color);
	color: white;
}